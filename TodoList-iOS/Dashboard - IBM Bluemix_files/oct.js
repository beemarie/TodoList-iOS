twttr=window.twttr||{},twttr.conversion=function(){function e(){this.pixelId="",this.eventQueue=[]}var t="&tpx_cb=twttr.conversion.loadPixels",n="//t.co/i/adsct?p_id=Twitter&p_user_id=0",i="https://analytics.twitter.com/i/adsct?p_id=Twitter&p_user_id=0";return e.prototype={setPixelId:function(e){this.pixelId=e},queueEvent:function(e,t){var n=this;e=e.toLowerCase().trim(),n.eventQueue.push([e,t]),setTimeout(function(){n.sendEvents()},0)},sendEvents:function(){if(0!==this.eventQueue.length){var e=this.eventQueue;this.eventQueue=[];var t=this.getLegacyParams(e),r=!0;twttr.conversion.trackPidBase(i,this.pixelId,t,r),twttr.conversion.trackPidBase(n,this.pixelId,t)}},getLegacyParams:function(e){var t={},n=this.isObject(e[0])?e[0]:{},i=this.isObject(n[1])?n[1]:{};return i.hasOwnProperty("value")&&(t.tw_sale_amount=i.value),i.hasOwnProperty("num_items")&&(t.tw_order_quantity=i.num_items),this.isObject(i.content_ids)&&(t.tw_product_id=i.content_ids[0]),t},isObject:function(e){return Object(e)===e}},function(){if(window.twq){var t=new e;twq.exe=function(){var e,n=Array.prototype.slice.call(arguments),i=n[0],r=n.slice(1);switch(i){case"init":e=t.setPixelId;break;case"track":e=t.queueEvent}e&&e.apply(t,r)};for(var n=0;n<twq.queue.length;n++)twq.exe.apply(null,twq.queue[n])}}(),{trackBase:function(e,t,n,i){if(t&&n){var r=e+"&merch_id="+encodeURIComponent(t);r+="&event="+encodeURIComponent(n),i&&(r+="&value="+encodeURIComponent(i)),this.buildPixel(r)}},trackPidBase:function(e,n,i,r){if(n){var o="";if("object"==typeof i){"tw_sale_amount"in i||(i.tw_sale_amount=0),"tw_order_quantity"in i||(i.tw_order_quantity=0);for(var a in i)i.hasOwnProperty(a)&&(o+="&"+(encodeURIComponent(a)+"="+encodeURIComponent(i[a])))}else o="&tw_sale_amount=0&tw_order_quantity=0";var s=e+"&txn_id="+encodeURIComponent(n)+o,u=this.getIframeStatus();if(s+="&tw_iframe_status="+encodeURIComponent(u.value),u===this.IframeStatusCodes.IN_IFRAME&&""!=document.referrer){var d=encodeURIComponent(document.referrer);s+="&tw_document_referrer="+d}var c=this.buildPixel;r&&(s+=t,c=this.buildScript);var l=this.getHiddenProp();this.isDocumentHidden()?this.buildPixelWhenVizChange(s,l,c):c(s)}},track:function(e,t,r){this.trackBase(i,e,t,r),this.trackBase(n,e,t,r)},trackPid:function(e,t){var r=this.isEligibleForJsonp(e);this.trackPidBase(i,e,t,r),this.trackPidBase(n,e,t)},isEligibleForJsonp:function(e){var t=["nusxj","l4ego","l4egp","nue12","nudfu","l6eqh","l6eqg","l6eqf","l6eqk","l6eqi","nueas","nujef","l6iq9","l6a11","l6dqt","l6w41","nue0t","l47d9","l4cy8","nufak","l5d1a","l5tzj","nu5b3","nu8xb","l56nn","l56ns","l57f6","nudbb","nu2vi","l635n","l5dqk","nuxe8"],n=.1;return t.indexOf(e)>-1||this.randomDecision(n)},randomDecision:function(e){return Math.random()<e},buildScript:function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)},cs:!0,buildIframe:function(e){if(twttr.conversion.cs){twttr.conversion.cs=!1;var t=document.createElement("iframe");t.src=e,t.hidden=!0,document.body.appendChild(t)}},buildPixel:function(e){var t=new Image;t.src=e},isDocumentHidden:function(){var e=this.getHiddenProp();return e&&document[e]},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null},buildPixelWhenVizChange:function(e,t,n){var i=t.replace(/[H|h]idden/,"")+"visibilitychange",r=function(){n(e),document.removeEventListener(i,r,!1)}.bind(this);document.addEventListener(i,r,!1)},getIframeStatus:function(){try{return this.isIframed()?this.IframeStatusCodes.NOT_IN_IFRAME:this.IframeStatusCodes.IN_IFRAME}catch(e){return this.IframeStatusCodes.ERROR}},isIframed:function(){return window.self===window.top},IframeStatusCodes:{NOT_IN_IFRAME:{value:0},IN_IFRAME:{value:1},ERROR:{value:2}},loadPixels:function(e){var t,n;"hif"in e&&(t=e.hif,t.forEach(twttr.conversion.buildIframe)),"tags"in e&&(n=e.tags,n.forEach(twttr.conversion.buildPixel))}}}();